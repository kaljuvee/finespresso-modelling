# Finespresso Analytics - Data Directory

This directory contains backtesting results and data files generated by the Finespresso Analytics system.

## 📁 Files Overview

### Backtest Results
- **`backtest_results_improved.csv`** - Main backtest results with detailed metrics
- **`backtest_summary.csv`** - Summary metadata about the backtest execution

## 📊 CSV File Structures

### backtest_results_improved.csv

| Column Name | Description | Data Type | Example |
|-------------|-------------|-----------|---------|
| `Model_Name` | Name of the ML model used | String | "all_events" |
| `Total_PnL_USD` | Total Profit & Loss in USD | Float | 1250.50 |
| `Total_Trades` | Number of trades executed | Integer | 45 |
| `Winning_Trades` | Number of profitable trades | Integer | 28 |
| `Losing_Trades` | Number of unprofitable trades | Integer | 17 |
| `Win_Rate_Percent` | Percentage of winning trades | Float | 62.22 |
| `Final_Capital_USD` | Final capital after backtest | Float | 101250.50 |
| `Return_Percent` | Total return percentage | Float | 1.25 |

### backtest_summary.csv

| Column Name | Description | Data Type | Example |
|-------------|-------------|-----------|---------|
| `Metric` | Name of the summary metric | String | "Initial_Capital_USD" |
| `Value` | Value of the metric | String/Float | "100000.0" |
| `Description` | Explanation of the metric | String | "Starting capital for the backtest" |

## 🚀 Usage Examples

### Loading Results in Python
```python
import pandas as pd

# Load main results
results = pd.read_csv('data/backtest_results_improved.csv')
print(results.head())

# Load summary
summary = pd.read_csv('data/backtest_summary.csv')
print(summary)

# Find best performing model
best_model = results.loc[results['Return_Percent'].idxmax()]
print(f"Best model: {best_model['Model_Name']} with {best_model['Return_Percent']:.2f}% return")
```

### Loading Results in R
```r
# Load main results
results <- read.csv('data/backtest_results_improved.csv')
head(results)

# Load summary
summary <- read.csv('data/backtest_summary.csv')
print(summary)

# Find best performing model
best_model <- results[which.max(results$Return_Percent), ]
cat("Best model:", best_model$Model_Name, "with", best_model$Return_Percent, "% return\n")
```

## 📈 Analysis Tips

### Key Metrics to Analyze
1. **Return_Percent** - Overall profitability of each model
2. **Win_Rate_Percent** - Consistency of the model predictions
3. **Total_Trades** - Activity level and opportunity capture
4. **Total_PnL_USD** - Absolute profit/loss amounts

### Performance Evaluation
- Models with **Win_Rate_Percent > 60%** are generally considered good
- **Return_Percent > 10%** annually is typically strong performance
- **Total_Trades** should be balanced (not too few, not too many)

### Risk Assessment
- High **Losing_Trades** relative to **Winning_Trades** may indicate high risk
- Large **Total_PnL_USD** swings suggest volatility
- Consistent performance across different time periods is preferred

## 🔄 Regenerating Data

To regenerate the backtest results:

```bash
# Run with default settings
python run_backtest.py --output data/backtest_results_new.csv

# Run with custom parameters
python run_backtest.py --capital 50000 --start-date 2024-01-01 --end-date 2024-12-31 --output data/backtest_custom.csv

# Run specific models only
python run_backtest.py --models all_events partnerships --output data/backtest_selected.csv
```

## 📝 Notes

- Current results show 0 trades due to limited test data in the database
- Real-world performance will vary based on data quality and market conditions
- Results are for backtesting purposes only and do not guarantee future performance
- Always validate results with out-of-sample data before live trading

## 🔗 Related Files

- `../run_backtest.py` - Command-line backtesting script
- `../app.py` - Streamlit web interface
- `../models/` - Trained ML models directory
- `../finespresso.db` - SQLite database with news and price data

